<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Recipe management</title>
    <!-- Include Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <!-- Beggin - Header Section -->
    <header id="header"> </header>
    <!-- End - Header Section -->
    
    <!-- Beggin - Home Section - show Recipe'z -->
        <div id="recipes" class="container mt-5">
            <script>
                // Fetch data from the API
                // the two lines below are important when deploying application to render or to localhost
                //https://lab2-test3.onrender.com/recipes   
                fetch("http://localhost:3000/recipes ")
                    .then(response => response.json())
                    .then(data => {
                        // Get the container where we'll display recipes
                        const recipesContainer = document.getElementById("recipes");

                        // Loop through the data and create elements for each recipe
                        data.forEach(recipe => {
                            const recipeCard = document.createElement("div");
                            recipeCard.classList.add("card", "mb-3");

                            const cardBody = document.createElement("div");
                            cardBody.classList.add("card-body");

                            const recipeTitle = document.createElement("h5");
                            recipeTitle.classList.add("card-title");
                            recipeTitle.textContent = recipe.title;

                            const recipeIngredients = document.createElement("p");
                            recipeIngredients.classList.add("card-text");
                            recipeIngredients.textContent = "Ingredients: " + recipe.ingredients.join(", ");

                            const recipeInstructions = document.createElement("p");
                            recipeInstructions.classList.add("card-text");
                            recipeInstructions.textContent = "Instructions: " + recipe.instructions;

                            const recipeCookingTime = document.createElement("p");
                            recipeCookingTime.classList.add("card-text");
                            recipeCookingTime.textContent = "Cooking Time: " + recipe.cookingTime;

                            cardBody.appendChild(recipeTitle);
                            cardBody.appendChild(recipeIngredients);
                            cardBody.appendChild(recipeInstructions);
                            cardBody.appendChild(recipeCookingTime);
                            recipeCard.appendChild(cardBody);
                            recipesContainer.appendChild(recipeCard);
                        });
                    })
                    .catch(error => {
                        console.error("Error fetching recipes:", error);
                    });
            </script>
        </div>
    <!-- End - Home Section -->
    
    <!-- Beggin - Footer Section -->
    <div id="footer"> </div>
    <!-- End - Footer Section -->

    <!-- beggin javascript dependacies -->
    <script src="index.js"></script>
    <script src="connection.js"></script>
    <script src="recipe.js"></script>
    <script>
        const Loader_Header_Footer = async () => {
            // Load & insert header
            const header = await fetch('header.html');
            const headerText = await header.text();
            document.getElementById('header').innerHTML = headerText;

            // Load & insert footer
            const footer = await fetch('footer.html');
            const footerText = await footer.text();
            document.getElementById('footer').innerHTML = footerText;
        }
        Loader_Header_Footer();
    </script>
    <!-- End javascript dependacies -->
</body>
</html>